

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DataArrays &mdash; DataArray Docs v0.0.3 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="DataArray Docs v0.0.3 documentation" href="index.html" />
    <link rel="next" title="Methods" href="ndarray_methods.html" />
    <link rel="prev" title="Issues" href="design_questions/issues.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ndarray_methods.html" title="Methods"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="design_questions/issues.html" title="Issues"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DataArray Docs v0.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dataarrays">
<h1>DataArrays<a class="headerlink" href="#dataarrays" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-dataarray-creation-and-mixing">
<span id="init-ufuncs"></span><h2>Basic DataArray Creation And Mixing<a class="headerlink" href="#basic-dataarray-creation-and-mixing" title="Permalink to this headline">¶</a></h2>
<p>DataArrays are constructed with array-like sequences and axis labels:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">a</span>
<span class="go">Axis(label=&#39;a&#39;, index=0, ticks=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">b</span>
<span class="go">Axis(label=&#39;b&#39;, index=1, ticks=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">c</span>
<span class="go">Axis(label=&#39;c&#39;, index=2, ticks=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1, 2, 3)</span>
</pre></div>
</div>
<p>Not all axes must necessarily be explicitly labeled, since None is a valid axis
label:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr2</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;b&#39;</span> <span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr2</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;a&#39;, None, &#39;b&#39;)</span>
</pre></div>
</div>
<p>If no label is given for an axis, None is implicitly assumed.  So trailing axes
without labels will be labeled as None:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr2</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span> <span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr2</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, None, None)</span>
</pre></div>
</div>
<p>Combining named and unnamed arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">narr</span> <span class="o">+</span> <span class="mi">5</span> <span class="c"># OK</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">narr</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span> <span class="c"># OK</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">narr</span> <span class="o">+</span> <span class="n">n2</span> <span class="c"># OK</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">n3</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">narr</span> <span class="o">+</span> <span class="n">n3</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">NamedAxisError: Axis labels are incompatible for a binary operation</span>: <span class="n-Identifier">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), (&#39;x&#39;, &#39;b&#39;, &#39;c&#39;)</span>
</pre></div>
</div>
<p>Now, what about matching names, but different indices for the names?</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n4</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">narr</span> <span class="o">+</span> <span class="n">n4</span> <span class="c"># is this OK?</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">NamedAxisError: Axis labels are incompatible for a binary operation</span>: <span class="n-Identifier">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), (&#39;b&#39;, &#39;a&#39;, &#39;c&#39;)</span>
</pre></div>
</div>
<p>The names and the position have to be the same, and the above example should raise an error.  At least for now we will raise an error, and review later.</p>
<div class="section" id="with-ticks">
<h3>With &#8220;ticks&#8221;<a class="headerlink" href="#with-ticks" title="Permalink to this headline">¶</a></h3>
<p>Constructing a DataArray such that an Axis has ticks, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cap_ax_spec</span> <span class="o">=</span> <span class="s">&#39;capitals&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;washington&#39;</span><span class="p">,</span> <span class="s">&#39;london&#39;</span><span class="p">,</span> <span class="s">&#39;berlin&#39;</span><span class="p">,</span> <span class="s">&#39;paris&#39;</span><span class="p">,</span> <span class="s">&#39;moscow&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_ax_spec</span> <span class="o">=</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;0015&#39;</span><span class="p">,</span> <span class="s">&#39;0615&#39;</span><span class="p">,</span> <span class="s">&#39;1215&#39;</span><span class="p">,</span> <span class="s">&#39;1815&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">[</span><span class="n">time_ax_spec</span><span class="p">,</span> <span class="n">cap_ax_spec</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span><span class="o">.</span><span class="n">axes</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]), Axis(label=&#39;capitals&#39;, index=1, ticks=[&#39;washington&#39;, &#39;london&#39;, &#39;berlin&#39;, &#39;paris&#39;, &#39;moscow&#39;]))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="slicing">
<span id="id1"></span><h2>Slicing<a class="headerlink" href="#slicing" title="Permalink to this headline">¶</a></h2>
<p>A DataArray with simple named axes can be sliced many ways.</p>
<p>Per Axis:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">a</span>
<span class="go">Axis(label=&#39;a&#39;, index=0, ticks=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">DataArray([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.]])</span>
<span class="go">(&#39;b&#39;, &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axes</span>
<span class="go">(Axis(label=&#39;b&#39;, index=0, ticks=None), Axis(label=&#39;c&#39;, index=1, ticks=None))</span>
</pre></div>
</div>
<p>By normal &#8220;numpy&#8221; slicing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axes</span>
<span class="go">(Axis(label=&#39;b&#39;, index=0, ticks=None), Axis(label=&#39;c&#39;, index=1, ticks=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axes</span> <span class="o">==</span> <span class="n">narr</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">axes</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Through the &#8220;axis slicer&#8221; <tt class="docutils literal"><span class="pre">aix</span></tt> attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="p">[</span> <span class="n">narr</span><span class="o">.</span><span class="n">aix</span><span class="o">.</span><span class="n">b</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span>
<span class="go">DataArray([[ 0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="p">[</span> <span class="n">narr</span><span class="o">.</span><span class="n">aix</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">b</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="p">]</span>
<span class="go">DataArray([[ 0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="p">[</span> <span class="n">narr</span><span class="o">.</span><span class="n">aix</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">b</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="p">]</span> <span class="o">==</span> <span class="n">narr</span><span class="p">[:,:</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">DataArray([[ True,  True]], dtype=bool)</span>
</pre></div>
</div>
<div class="section" id="the-axis-indexing-object-it-s-a-stuple">
<h3>The Axis Indexing object (it&#8217;s a stuple)<a class="headerlink" href="#the-axis-indexing-object-it-s-a-stuple" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">aix</span></tt> attribute is a property which generates a &#8220;stuple&#8221; (special/slicing tuple):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">aix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c"># Returns an anonymous slicing tuple that knows</span>
    <span class="c"># about this array&#39;s geometry</span>
    <span class="k">return</span> <span class="n">stuple</span><span class="p">(</span> <span class="p">(</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim</span><span class="p">,</span>
                   <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="p">)</span>
</pre></div>
</div>
<p>The stuple should have a reference to a group of Axis objects that describes an array&#8217;s geometry. If the stuple is associated with a specific Axis, then when sliced itself, it can create a slicing tuple for the array with the given geometry.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">aix</span>
<span class="go">(slice(None, None, None), slice(None, None, None), slice(None, None, None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">aix</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(slice(None, None, None), 0, slice(None, None, None))</span>
</pre></div>
</div>
<p><strong>Note</strong> &#8211; the <tt class="docutils literal"><span class="pre">aix</span></tt> attribute provides some shorthand syntax for the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">narr</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">b</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="go">DataArray([[ 0.,  0.]])</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;)</span>
</pre></div>
</div>
<p>The mechanics are slightly different (using <tt class="docutils literal"><span class="pre">aix</span></tt>, a slicing tuple is created up-front before <tt class="docutils literal"><span class="pre">__getitem__</span></tt> is called), but functionality is the same. <strong>Question</strong> &#8211; Is it convenient enough to include the <tt class="docutils literal"><span class="pre">aix</span></tt> slicer? should it function differently?</p>
<p>Also, slicing with <tt class="docutils literal"><span class="pre">newaxis</span></tt> is implemented:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[:,:,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[:,:,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 2, 1, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[:,:,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;, None, &#39;z&#39;)</span>
</pre></div>
</div>
<p>I can also slice with <tt class="docutils literal"><span class="pre">newaxis</span></tt> at each Axis, or with the <tt class="docutils literal"><span class="pre">aix</span></tt> slicer (the results are identical). The effect of this is always to insert an unlabeled Axis with length-1 at the original index of the named Axis:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">axes</span>
<span class="go">(Axis(label=&#39;x&#39;, index=0, ticks=None), Axis(label=&#39;y&#39;, index=1, ticks=None), Axis(label=&#39;z&#39;, index=2, ticks=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="go">DataArray([[[[-0.5185789 ,  2.15360928,  0.27439545,  1.03371466],</span>
<span class="go">         [ 0.22295004, -0.67102797, -0.84618714, -0.87435244]]],</span>


<span class="go">       [[[ 1.22570705, -1.33283074, -0.89732455,  0.87430548],</span>
<span class="go">         [-0.69306908, -0.25327027, -0.53897745, -0.8659791 ]]],</span>


<span class="go">       [[[-1.18462101, -0.1644404 ,  0.5840826 ,  1.36768481],</span>
<span class="go">         [-0.51897418, -0.43526721, -1.18011399,  1.3553315 ]]]])</span>
<span class="go">(&#39;x&#39;, None, &#39;y&#39;, &#39;z&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;x&#39;, None, &#39;y&#39;, &#39;z&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 1, 2, 4)</span>
</pre></div>
</div>
</div>
<div class="section" id="slicing-and-ticks">
<h3>Slicing and ticks<a class="headerlink" href="#slicing-and-ticks" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to use ticks in any of the slicing syntax above.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span>
<span class="go">DataArray([[ 0,  1,  2,  3,  4],</span>
<span class="go">       [ 5,  6,  7,  8,  9],</span>
<span class="go">       [10, 11, 12, 13, 14],</span>
<span class="go">       [15, 16, 17, 18, 19]])</span>
<span class="go">(&#39;time&#39;, &#39;capitals&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">capitals</span><span class="p">[</span><span class="s">&#39;berlin&#39;</span><span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">DataArray([[ 2,  1,  0],</span>
<span class="go">       [ 7,  6,  5],</span>
<span class="go">       [12, 11, 10],</span>
<span class="go">       [17, 16, 15]])</span>
<span class="go">(&#39;time&#39;, &#39;capitals&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="s">&#39;0015&#39;</span><span class="p">:</span><span class="s">&#39;1815&#39;</span><span class="p">]</span>
<span class="go">DataArray([[ 0,  1,  2,  3,  4],</span>
<span class="go">       [ 5,  6,  7,  8,  9],</span>
<span class="go">       [10, 11, 12, 13, 14]])</span>
<span class="go">(&#39;time&#39;, &#39;capitals&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_caps</span><span class="p">[:,</span> <span class="s">&#39;london&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">DataArray([[ 1,  2],</span>
<span class="go">       [ 6,  7],</span>
<span class="go">       [11, 12],</span>
<span class="go">       [16, 17]])</span>
<span class="go">(&#39;time&#39;, &#39;capitals&#39;)</span>
</pre></div>
</div>
<p>The .start and .stop attributes of the slice object can be either None, an integer index, or a valid tick. They may even be mixed. <em>The .step attribute, however, must be None or an nonzero integer.</em></p>
<p><strong>Historical note: previously integer ticks clobbered indices.</strong> For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">centered_data</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#39;c_idx&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span> <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centered_data</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">c_idx</span><span class="o">.</span><span class="n">make_slice</span><span class="p">(</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="p">)</span>
<span class="go">(slice(3, 6, None),)</span>
</pre></div>
</div>
<p>make_slice() first tries to look up the key parameters as ticks, and then sees if the key parameters can be used as simple indices. Thus 0 is found as index 3, and 6 is passed through as index 6.</p>
<div class="section" id="possible-resolution-1">
<h4>Possible resolution 1<a class="headerlink" href="#possible-resolution-1" title="Permalink to this headline">¶</a></h4>
<p>&#8220;larry&#8221; would make this distinction:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; centered_data.axis.c_idx[ [0]:[2] ]
&gt;&gt;&gt; &lt; returns underlying array from [3:5] &gt;
&gt;&gt;&gt; centered_data.axis.c_idx[ 0:2 ]
&gt;&gt;&gt; &lt; returns underlying array from [0:2] &gt;</pre>
</div>
<p>And I believe mixing of ticks and is valid also.</p>
</div>
<div class="section" id="possible-resolution-2-the-winner">
<h4>Possible resolution 2 (the winner)<a class="headerlink" href="#possible-resolution-2-the-winner" title="Permalink to this headline">¶</a></h4>
<p>Do not allow integer ticks &#8211; cast to float perhaps</p>
<p><strong>Note</strong>: this will be the solution. When validating ticks on an Axis, ensure that none of them <tt class="docutils literal"><span class="pre">isinstance(t,</span> <span class="pre">int)</span></tt></p>
</div>
<div class="section" id="possible-resolution-3">
<h4>Possible resolution 3<a class="headerlink" href="#possible-resolution-3" title="Permalink to this headline">¶</a></h4>
<p>Restrict access to tick based slicing to another special slicing object.</p>
</div>
</div>
</div>
<div class="section" id="broadcasting">
<span id="id2"></span><h2>Broadcasting<a class="headerlink" href="#broadcasting" title="Permalink to this headline">¶</a></h2>
<p>What about broadcasting between two named arrays, where the broadcasting
adds an axis? All ordinary NumPy rules for shape compatibility apply. Additionally, DataArray imposes axis label consistency rules.</p>
<p>The broadcasted DataArray below, &#8220;a&#8221;, takes on dummy dimensions that are taken to be compatible with the larger DataArray:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span>
<span class="go">DataArray([[ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.]])</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;)</span>
</pre></div>
</div>
<p>When there are unlabeled dimensions, they also must be consistently oriented across arrays when broadcasting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span>
<span class="go">DataArray([[[-0.06487062,  1.58301239,  0.74446424,  1.08379646],</span>
<span class="go">        [ 1.06747405, -1.83001368,  3.61478199, -0.55349716]],</span>

<span class="go">       [[-1.39792187,  2.29882562,  0.56549005,  1.24946248],</span>
<span class="go">        [ 0.70568938, -2.39824403,  3.5630711 , -0.19336178]],</span>

<span class="go">       [[-0.48030142,  0.35936638,  0.20565394,  0.83436278],</span>
<span class="go">        [-1.03604339, -1.59288828,  2.25200683, -0.75328268]]])</span>
<span class="go">(&#39;x&#39;, None, &#39;y&#39;)</span>
</pre></div>
</div>
<p>We already know that if the dimension labels don&#8217;t match, this won&#8217;t be allowed (even though the shapes are correct):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
<span class="go">------------------------------------------------------------</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">NamedAxisError: Axis labels are incompatible for a binary operation</span>: <span class="n-Identifier">(&#39;x&#39;, &#39;y&#39;), (&#39;x&#39;,)</span>
</pre></div>
</div>
<p>But a numpy idiom for padding dimensions helps us in this case:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">[:,</span><span class="bp">None</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span>
<span class="go">DataArray([[ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.]])</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;)</span>
</pre></div>
</div>
<p>In other words, this scenario is also a legal combination:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:,</span><span class="bp">None</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span><span class="o">.</span><span class="n">labels</span>
<span class="go">(&#39;x&#39;, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">+</span> <span class="n">a2</span>
<span class="go">DataArray([[ 2.,  2.,  2.],</span>
<span class="go">       [ 2.,  2.,  2.],</span>
<span class="go">       [ 2.,  2.,  2.]])</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;)</span>
</pre></div>
</div>
<p>The rule for dimension compatibility is that any two axes match if one of the following is true</p>
<ul class="simple">
<li>their (label, length) pairs are equal</li>
<li>their dimensions are broadcast-compatible, and their labels are equal</li>
<li>their dimensions are broadcast-compatible, and their labels are non-conflicting (ie, one or both are None)</li>
</ul>
<p><strong>Question</strong> &#8211; what about this situation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span> <span class="n">labels</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="go">DataArray([[ 2.,  2.,  2.],</span>
<span class="go">       [ 2.,  2.,  2.],</span>
<span class="go">       [ 2.,  2.,  2.]])</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;)</span>
</pre></div>
</div>
<p>The broadcasting rules currently allow this combination. I&#8217;m inclined to allow it. Even though the axes are different lengths in <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>, and therefore <em>might</em> be considered different logical axes, there is no actual information collision from <tt class="docutils literal"><span class="pre">a.axis.y</span></tt>.</p>
</div>
<div class="section" id="iteration">
<span id="id3"></span><h2>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h2>
<p>seems to work:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">foo</span> <span class="ow">in</span> <span class="n">time_caps</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">foo</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">foo</span><span class="o">.</span><span class="n">axes</span>
<span class="gp">...</span>
<span class="go">[0 1 2 3 4]</span>
<span class="go">(&#39;capitals&#39;,)</span>
<span class="go">(Axis(label=&#39;capitals&#39;, index=0, ticks=[&#39;washington&#39;, &#39;london&#39;, &#39;berlin&#39;, &#39;paris&#39;, &#39;moscow&#39;]),)</span>
<span class="go">[5 6 7 8 9]</span>
<span class="go">(&#39;capitals&#39;,)</span>
<span class="go">(Axis(label=&#39;capitals&#39;, index=0, ticks=[&#39;washington&#39;, &#39;london&#39;, &#39;berlin&#39;, &#39;paris&#39;, &#39;moscow&#39;]),)</span>
<span class="go">[10 11 12 13 14]</span>
<span class="go">(&#39;capitals&#39;,)</span>
<span class="go">(Axis(label=&#39;capitals&#39;, index=0, ticks=[&#39;washington&#39;, &#39;london&#39;, &#39;berlin&#39;, &#39;paris&#39;, &#39;moscow&#39;]),)</span>
<span class="go">[15 16 17 18 19]</span>
<span class="go">(&#39;capitals&#39;,)</span>
<span class="go">(Axis(label=&#39;capitals&#39;, index=0, ticks=[&#39;washington&#39;, &#39;london&#39;, &#39;berlin&#39;, &#39;paris&#39;, &#39;moscow&#39;]),)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">foo</span> <span class="ow">in</span> <span class="n">time_caps</span><span class="o">.</span><span class="n">T</span><span class="p">:</span>
<span class="go">    print foo</span>
<span class="go">    print foo.axes</span>
<span class="gp">...</span>
<span class="go">[ 0  5 10 15]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]),)</span>
<span class="go">[ 1  6 11 16]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]),)</span>
<span class="go">[ 2  7 12 17]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]),)</span>
<span class="go">[ 3  8 13 18]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]),)</span>
<span class="go">[ 4  9 14 19]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">(Axis(label=&#39;time&#39;, index=0, ticks=[&#39;0015&#39;, &#39;0615&#39;, &#39;1215&#39;, &#39;1815&#39;]),)</span>
</pre></div>
</div>
<p>Or even more conveniently:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">foo</span> <span class="ow">in</span> <span class="n">time_caps</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">capitals</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">foo</span>
<span class="gp">...</span>
<span class="go">[ 0  5 10 15]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">[ 1  6 11 16]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">[ 2  7 12 17]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">[ 3  8 13 18]</span>
<span class="go">(&#39;time&#39;,)</span>
<span class="go">[ 4  9 14 19]</span>
<span class="go">(&#39;time&#39;,)</span>
</pre></div>
</div>
</div>
<div class="section" id="transposition-of-axes">
<span id="transposition"></span><h2>Transposition of Axes<a class="headerlink" href="#transposition-of-axes" title="Permalink to this headline">¶</a></h2>
<p>Transposition of a DataArray preserves the dimension labels, and updates the corresponding indices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 2, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">axes</span>
<span class="go">[Axis(label=&#39;x&#39;, index=0, ticks=None), Axis(label=None, index=1, ticks=None), Axis(label=&#39;y&#39;, index=2, ticks=None)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">axes</span>
<span class="go">[Axis(label=&#39;y&#39;, index=0, ticks=None), Axis(label=None, index=1, ticks=None), Axis(label=&#39;x&#39;, index=2, ticks=None)]</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-labels-on-dataarrays">
<span id="label-updates"></span><h2>Changing Labels on DataArrays<a class="headerlink" href="#changing-labels-on-dataarrays" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tricky-attributes">
<h3>Tricky Attributes<a class="headerlink" href="#tricky-attributes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>.labels &#8211; currently a mutable list of Axis.name attributes</li>
<li>.axes &#8211; currently a mutable list of Axis objects</li>
<li>.axis &#8211; a key-to-attribute dictionary</li>
</ul>
<p>Need an event-ful way to change an Axis&#8217;s label, such that all the above attributes are updated.</p>
<p><strong>Proposed solution</strong>:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>use a set_label() method. This will consequently update the parent array&#8217;s</dt>
<dd><p class="first last">(labels, axes, axis) attributes.</p>
</dd>
</dl>
</li>
<li><p class="first">make the mutable lists into <em>tuples</em> to deny write access.</p>
</li>
<li><p class="first">make the KeyStruct <tt class="docutils literal"><span class="pre">.axis</span></tt> have write-once access</p>
</li>
</ol>
</div>
</div>
<div class="section" id="todo">
<span id="id4"></span><h2>ToDo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Support DataArray instances with mixed axes: simple ones with no values
and &#8216;fancy&#8217; ones with data in them.  Syntax?</li>
</ul>
<p><tt class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">DataArray.from_names(data,</span> <span class="pre">labels=['a','b','c'])</span></tt></p>
<p><tt class="docutils literal"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">DataArray(data,</span> <span class="pre">axes=[('a',['1','2','3']),</span> <span class="pre">('b',['one','two']),</span> <span class="pre">('c',['red','black'])])</span></tt></p>
<p><tt class="docutils literal"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">DataArray(data,</span> <span class="pre">axes=[('a',['1','2','3']),</span> <span class="pre">('b',None),</span> <span class="pre">('c',['red','black'])])</span></tt></p>
<ul class="simple">
<li>Can a, b, and c be combined in binary operations, given the different tick
combinations?</li>
<li>How to handle complicated reshaping (not flattening or, padding/trimming with
1s)</li>
<li>Units support (Darren&#8217;s)</li>
<li>Jagged arrays? Kilian&#8217;s suggestion.  Drop the base array altogether, and
access data via the .axis objects alone.</li>
<li>&#8220;Enum dtype&#8221;, could be useful for event selection.</li>
<li>&#8220;Ordered factors&#8221;? Something R supports.</li>
<li>How many axis classes?</li>
<li>Allowing non-string axis names?</li>
</ul>
<ul class="simple">
<li>At least they must be hashable...</li>
<li>Serialization?</li>
</ul>
<ul class="simple">
<li>Allowing multiple labels per axis?</li>
<li>Rob Speer&#8217;s proposal for purely top-level, &#8216;magical&#8217; attributes?</li>
<li>Finish the semantics of .lix indexing, especially with regards to what it
should do when integer ticks are present.</li>
<li>What should a.axis.x[object] do: .lix-style indexing or pure numpy indexing?</li>
</ul>
<div class="section" id="indexing-semantics-possibilities">
<h3>Indexing semantics possibilities<a class="headerlink" href="#indexing-semantics-possibilities" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>.lix: Integers always labels.  a.lix[3:10] means labels 3 and 10 MUST exist.</li>
<li>.nix: Integers are never treated as labels.</li>
<li>.awful_ix: 1, then 2.</li>
</ol>
</div>
<div class="section" id="axis-api">
<h3>Axis api<a class="headerlink" href="#axis-api" title="Permalink to this headline">¶</a></h3>
<p>If a is an axis from an array: a = x.axis.a</p>
<ul class="simple">
<li>a.at(key): return the slice at that key, with one less dimension than x</li>
<li>a.keep(keys): join slices for given keys, dims=dims(x)</li>
<li>a.drop(keys): like keep, but the opposite</li>
</ul>
<p>a[i] valid cases:</p>
<ul class="simple">
<li>i: integer =&gt; normal numpy scalar indexing, one less dim than x</li>
<li>i: slice: numpy view slicing.  same dims as x, must recover the ticks</li>
<li>i: list/array: numpy fancy indexing, as long as the index list is 1d only.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DataArrays</a><ul>
<li><a class="reference internal" href="#basic-dataarray-creation-and-mixing">Basic DataArray Creation And Mixing</a><ul>
<li><a class="reference internal" href="#with-ticks">With &#8220;ticks&#8221;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slicing">Slicing</a><ul>
<li><a class="reference internal" href="#the-axis-indexing-object-it-s-a-stuple">The Axis Indexing object (it&#8217;s a stuple)</a></li>
<li><a class="reference internal" href="#slicing-and-ticks">Slicing and ticks</a><ul>
<li><a class="reference internal" href="#possible-resolution-1">Possible resolution 1</a></li>
<li><a class="reference internal" href="#possible-resolution-2-the-winner">Possible resolution 2 (the winner)</a></li>
<li><a class="reference internal" href="#possible-resolution-3">Possible resolution 3</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#broadcasting">Broadcasting</a></li>
<li><a class="reference internal" href="#iteration">Iteration</a></li>
<li><a class="reference internal" href="#transposition-of-axes">Transposition of Axes</a></li>
<li><a class="reference internal" href="#changing-labels-on-dataarrays">Changing Labels on DataArrays</a><ul>
<li><a class="reference internal" href="#tricky-attributes">Tricky Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo">ToDo</a><ul>
<li><a class="reference internal" href="#indexing-semantics-possibilities">Indexing semantics possibilities</a></li>
<li><a class="reference internal" href="#axis-api">Axis api</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="design_questions/issues.html"
                        title="previous chapter">Issues</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ndarray_methods.html"
                        title="next chapter">Methods</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/basic_data_array.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ndarray_methods.html" title="Methods"
             >next</a> |</li>
        <li class="right" >
          <a href="design_questions/issues.html" title="Issues"
             >previous</a> |</li>
        <li><a href="index.html">DataArray Docs v0.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Numpy Developers &lt;numpy-discussion@scipy.org&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2+.
    </div>
  </body>
</html>