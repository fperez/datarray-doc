

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Printing Datarrays &mdash; DataArray Docs v0.0.6 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DataArray Docs v0.0.6 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">DataArray Docs v0.0.6 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="printing-datarrays">
<h1>Printing Datarrays<a class="headerlink" href="#printing-datarrays" title="Permalink to this headline">¶</a></h1>
<p>One of the most important ways to understand what&#8217;s going on in a labeled
array is to be able to see a pretty text representation of it. In Divisi2 I
stole the __str__ method from PySparse to accomplish this, but NumPy arrays are
more varied than PySparse (where everything is two-dimensional and made of
floats).</p>
<div class="section" id="can-we-build-on-numpy-s-str">
<h2>Can we build on NumPy&#8217;s str?<a class="headerlink" href="#can-we-build-on-numpy-s-str" title="Permalink to this headline">¶</a></h2>
<p>NumPy has provided somewhat-pretty text representations for a long time, but
the code in numpy.core.arrayprint is</p>
<ul class="simple">
<li>difficult to extend</li>
<li>undocumented</li>
<li>kind of spaghetti, frankly</li>
<li>largely untouched for the last 13 years!</li>
</ul>
<p>Its output can be aesthetically suboptimal in some cases. When printing large
arrays of floats, for example, it will wrap every line like this:</p>
<blockquote>
<dl class="docutils">
<dt>[[  0.00000000e+00   1.00000000e-04   2.00000000e-04 ...,   4.70000000e-03</dt>
<dd><blockquote class="first">
4.80000000e-03   4.90000000e-03]</blockquote>
<dl class="docutils">
<dt>[  5.00000000e-03   5.10000000e-03   5.20000000e-03 ...,   9.70000000e-03</dt>
<dd>9.80000000e-03   9.90000000e-03]</dd>
<dt>[  1.00000000e-02   1.01000000e-02   1.02000000e-02 ...,   1.47000000e-02</dt>
<dd>1.48000000e-02   1.49000000e-02]</dd>
</dl>
<p>...,
[  3.35000000e-01   3.35100000e-01   3.35200000e-01 ...,   3.39700000e-01</p>
<blockquote>
3.39800000e-01   3.39900000e-01]</blockquote>
<dl class="last docutils">
<dt>[  3.40000000e-01   3.40100000e-01   3.40200000e-01 ...,   3.44700000e-01</dt>
<dd>3.44800000e-01   3.44900000e-01]</dd>
<dt>[  3.45000000e-01   3.45100000e-01   3.45200000e-01 ...,   3.49700000e-01</dt>
<dd>3.49800000e-01   3.49900000e-01]]</dd>
</dl>
</dd>
</dl>
</blockquote>
<p>The user can understand what that means, but it&#8217;ll be hard to stick labels on.</p>
<p>My conclusion is that it will be better to build this representation from the
ground up.</p>
</div>
<div class="section" id="the-2d-pretty-printer">
<h2>The 2D pretty-printer<a class="headerlink" href="#the-2d-pretty-printer" title="Permalink to this headline">¶</a></h2>
<p>Screens are 2D, so everything is a variant of the 2D case. What we need is a
class designed for printing strings in a grid. This class will then:</p>
<ul class="simple">
<li>Find a formatter for the dtype of the matrix (the &#8220;cell formatter&#8221;).</li>
<li>Make an array (a string array? might as well) of equal-width string
representations</li>
<li>Attach row and column labels as the first row and column of the array</li>
<li>Join together everything into a correctly-aligned, multi-line string</li>
</ul>
<p>The width of each cell is a negotiation between the grid formatter and the cell
formatter:</p>
<ul class="simple">
<li>Cell: I can print these floats in 5 to 15 characters. More characters is
better, of course.</li>
<li>Grid: I&#8217;ll give you 7.</li>
<li>Cell: Stingy bastard.</li>
</ul>
<p>Maybe this could be accomplished with &#8220;small&#8221;, &#8220;medium&#8221;, and &#8220;large&#8221; options
for each formatter, allowing us to reuse arrayprint formatters:</p>
<ul class="simple">
<li>float: large = high precision, medium = lower precision, small = lower
precision and suppress_small</li>
<li>int: large = max number of digits, medium/small = exponential notation</li>
<li>str: large = maximum length, medium = truncate</li>
<li>bool: large = &#8216; True&#8217;/&#8217;False&#8217;, medium/small = &#8216;T&#8217;/&#8217;-&#8216; (to be visually
distinct)</li>
</ul>
<p>Brackets are _not_ printed (it&#8217;s too hard to work them in with the labels).</p>
</div>
<div class="section" id="the-1d-pretty-printer">
<h2>The 1D pretty-printer<a class="headerlink" href="#the-1d-pretty-printer" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s the 2D printer with only one row.</p>
</div>
<div class="section" id="the-3d-pretty-printer">
<h2>The 3D pretty-printer<a class="headerlink" href="#the-3d-pretty-printer" title="Permalink to this headline">¶</a></h2>
<p>When people work with n-dimensional labeled data and n&gt;2, what they often do
is flatten it out into 2 dimensions. The rows are single data points, and the
columns are all the indices followed by the value. Show a few of these from the
beginning of the matrix, dots, and a few of these from the end of the matrix.</p>
<p>Then put all those back into the grid-maker.</p>
<p>If there are more than 30 or so dimensions, we are sad.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Printing Datarrays</a><ul>
<li><a class="reference internal" href="#can-we-build-on-numpy-s-str">Can we build on NumPy&#8217;s str?</a></li>
<li><a class="reference internal" href="#the-2d-pretty-printer">The 2D pretty-printer</a></li>
<li><a class="reference internal" href="#the-1d-pretty-printer">The 1D pretty-printer</a></li>
<li><a class="reference internal" href="#the-3d-pretty-printer">The 3D pretty-printer</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/printing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">DataArray Docs v0.0.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Numpy Developers &lt;numpy-discussion@scipy.org&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>